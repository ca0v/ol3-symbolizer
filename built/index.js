define("ol3-symbolizer/format/base",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}),define("ol3-symbolizer/common/assign",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assign=function(e,t,i){null!=i&&("object"==typeof i&&0===Object.keys(i).length||("image"===t&&(i.hasOwnProperty("radius")&&(t="circle"),i.hasOwnProperty("points")&&(t="star")),e[t]=i))}}),define("ol3-symbolizer/common/mixin",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mixin=function(t,i){return Object.keys(i).forEach(function(e){return t[e]=i[e]}),t}}),define("ol3-symbolizer/common/doif",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doif=function(e,t){null!=e&&t(e)}}),define("ol3-symbolizer/format/ol3-symbolizer",["require","exports","openlayers","ol3-symbolizer/common/assign","ol3-symbolizer/common/mixin","ol3-symbolizer/common/doif"],function(e,t,c,r,p,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.prototype.fromJson=function(e){return this.deserializeStyle(e)},e.prototype.toJson=function(e){return this.serializeStyle(e)},e.prototype.getGeometry=function(e){var t=e.getGeometry();return t instanceof c.geom.Polygon&&(t=t.getInteriorPoint()),t},e.prototype.serializeStyle=function(t){var i={};return t?"string"==typeof t?t:"number"==typeof t?t:(t.getColor&&p.mixin(i,this.serializeColor(t.getColor())),t.getImage&&r.assign(i,"image",this.serializeStyle(t.getImage())),t.getFill&&r.assign(i,"fill",this.serializeFill(t.getFill())),t.getOpacity&&r.assign(i,"opacity",t.getOpacity()),t.getStroke&&r.assign(i,"stroke",this.serializeStyle(t.getStroke())),t.getText&&r.assign(i,"text",this.serializeStyle(t.getText())),t.getWidth&&r.assign(i,"width",t.getWidth()),t.getOffsetX&&r.assign(i,"offset-x",t.getOffsetX()),t.getOffsetY&&r.assign(i,"offset-y",t.getOffsetY()),t.getWidth&&r.assign(i,"width",t.getWidth()),t.getFont&&r.assign(i,"font",t.getFont()),t.getRadius&&r.assign(i,"radius",t.getRadius()),t.getRadius2&&r.assign(i,"radius2",t.getRadius2()),t.getPoints&&r.assign(i,"points",t.getPoints()),t.getAngle&&r.assign(i,"angle",t.getAngle()),t.getRotation&&r.assign(i,"rotation",t.getRotation()),t.getOrigin&&r.assign(i,"origin",t.getOrigin()),t.getScale&&r.assign(i,"scale",t.getScale()),t.getSize&&r.assign(i,"size",t.getSize()),t.getAnchor&&(r.assign(i,"anchor",t.getAnchor()),"anchorXUnits,anchorYUnits,anchorOrigin".split(",").forEach(function(e){r.assign(i,e,t[e+"_"])})),t.path&&(t.path&&r.assign(i,"path",t.path),t.getImageSize&&r.assign(i,"imgSize",t.getImageSize()),t.stroke&&r.assign(i,"stroke",t.stroke),t.fill&&r.assign(i,"fill",t.fill),t.scale&&r.assign(i,"scale",t.scale),t.imgSize&&r.assign(i,"imgSize",t.imgSize)),t.getSrc&&r.assign(i,"src",t.getSrc()),i.points&&i.radius!==i.radius2&&(i.points/=2),i):null},e.prototype.serializeColor=function(e){if(e instanceof Array)return{color:c.color.asString(e)};if(e instanceof CanvasGradient)return{gradient:e};if(e instanceof CanvasPattern)return{pattern:e};if("string"==typeof e)return{color:e};throw"unknown color type"},e.prototype.serializeFill=function(e){return this.serializeStyle(e)},e.prototype.deserializeStyle=function(e){var t,i,r,o,n=this;if(e.circle)t=this.deserializeCircle(e.circle);else if(e.star)t=this.deserializeStar(e.star);else if(e.icon)t=this.deserializeIcon(e.icon);else if(e.svg)t=this.deserializeSvg(e.svg);else if(e.image&&(e.image.img||e.image.path))t=this.deserializeSvg(e.image);else if(e.image&&e.image.src)t=this.deserializeIcon(e.image);else if(e.image)throw"unknown image type";e.text&&(i=this.deserializeText(e.text)),e.fill&&(r=this.deserializeFill(e.fill)),e.stroke&&(o=this.deserializeStroke(e.stroke));var a=new c.style.Style({image:t,text:i,fill:r,stroke:o});return t&&a.setGeometry(function(e){return n.getGeometry(e)}),a},e.prototype.deserializeText=function(e){var t;e.rotation=e.rotation||0,e.scale=e.scale||1;var i=[e["offset-x"]||0,e["offset-y"]||0],r=i[0],o=i[1],n=new c.geom.Point([r,o]);return n.rotate(e.rotation,[0,0]),n.scale(e.scale,e.scale),r=(t=n.getCoordinates())[0],o=t[1],new c.style.Text({fill:e.fill&&this.deserializeFill(e.fill),stroke:e.stroke&&this.deserializeStroke(e.stroke),text:e.text,font:e.font,offsetX:r,offsetY:o,rotation:e.rotation,scale:e.scale})},e.prototype.deserializeCircle=function(e){var t=new c.style.Circle({radius:e.radius,fill:e.fill&&this.deserializeFill(e.fill),stroke:e.stroke&&this.deserializeStroke(e.stroke)});return t.setOpacity(e.opacity),t},e.prototype.deserializeStar=function(e){var t=new c.style.RegularShape({radius:e.radius,radius2:e.radius2,points:e.points,angle:e.angle,fill:e.fill&&this.deserializeFill(e.fill),stroke:e.stroke&&this.deserializeStroke(e.stroke)});return i.doif(e.rotation,function(e){return t.setRotation(e)}),i.doif(e.opacity,function(e){return t.setOpacity(e)}),t},e.prototype.deserializeIcon=function(e){e.anchor||(e.anchor=[e["anchor-x"]||.5,e["anchor-y"]||.5]);var t=new c.style.Icon({anchor:e.anchor||[.5,.5],anchorOrigin:e.anchorOrigin||"top-left",anchorXUnits:e.anchorXUnits||"fraction",anchorYUnits:e.anchorYUnits||"fraction",img:void 0,imgSize:void 0,offset:e.offset,offsetOrigin:e.offsetOrigin,opacity:e.opacity,scale:e.scale,snapToPixel:e.snapToPixel,rotateWithView:e.rotateWithView,rotation:e.rotation,size:e.size,src:e.src,color:e.color});return t.load(),t},e.prototype.deserializeSvg=function(t){var e;if(t.rotation=t.rotation||0,t.scale=t.scale||1,t.img){var i=document.getElementById(t.img);if(!i)throw"unable to find svg element: "+t.img;if(i){var r=i.getElementsByTagName("path")[0];r&&(i.viewBox&&(t.imgSize||(t.imgSize=[i.viewBox.baseVal.width,i.viewBox.baseVal.height])),t.path=(t.path||"")+r.getAttribute("d"))}}var o=document.createElement("canvas");if(t.path){if(e=t.imgSize.map(function(e){return e*t.scale}),o.width=e[0],o.height=e[1],t.stroke&&t.stroke.width){var n=2*t.stroke.width*t.scale;o.width+=n,o.height+=n}var a=o.getContext("2d"),s=new Path2D(t.path);a.translate(o.width/2,o.height/2),a.scale(t.scale,t.scale),a.translate(-t.imgSize[0]/2,-t.imgSize[1]/2),t.fill&&(a.fillStyle=t.fill.color,a.fill(s)),t.stroke&&(a.strokeStyle=t.stroke.color,a.lineWidth=t.stroke.width,a.stroke(s))}var l=new c.style.Icon({img:o,imgSize:[o.width,o.height],rotation:t.rotation,scale:1,anchor:t.anchor||[o.width/2,o.height],anchorOrigin:t.anchorOrigin,anchorXUnits:t.anchorXUnits||"pixels",anchorYUnits:t.anchorYUnits||"pixels",offset:t.offset,offsetOrigin:t.offsetOrigin,opacity:t.opacity,snapToPixel:t.snapToPixel,rotateWithView:t.rotateWithView,size:[o.width,o.height],src:void 0});return p.mixin(l,{path:t.path,stroke:t.stroke,fill:t.fill,scale:t.scale,imgSize:t.imgSize})},e.prototype.deserializeFill=function(e){return new c.style.Fill({color:e&&this.deserializeColor(e)})},e.prototype.deserializeStroke=function(e){var t=new c.style.Stroke;return i.doif(e.color,function(e){return t.setColor(e)}),i.doif(e.lineCap,function(e){return t.setLineCap(e)}),i.doif(e.lineDash,function(e){return t.setLineDash(e)}),i.doif(e.lineJoin,function(e){return t.setLineJoin(e)}),i.doif(e.miterLimit,function(e){return t.setMiterLimit(e)}),i.doif(e.width,function(e){return t.setWidth(e)}),t},e.prototype.deserializeColor=function(e){var t;if(e.color)return e.color;if(e.gradient){var r,i=e.gradient.type;if(0===i.indexOf("linear(")?r=this.deserializeLinearGradient(e.gradient):0===i.indexOf("radial(")&&(r=this.deserializeRadialGradient(e.gradient)),e.gradient.stops){p.mixin(r,{stops:e.gradient.stops});var o=e.gradient.stops.split(";");(o=o.map(function(e){return e.trim()})).forEach(function(e){var t=e.match(/ \d+%/m)[0],i=e.substr(0,e.length-t.length);r.addColorStop(parseInt(t)/100,i)})}return r}if(e.pattern){var n=e.pattern.repitition,a=(c=document.createElement("canvas")).width=c.height=6|e.pattern.spacing,s=c.getContext("2d");switch(s.fillStyle=e.pattern.color,e.pattern.orientation){case"horizontal":for(var l=0;l<a;l++)s.fillRect(l,0,1,1);break;case"vertical":for(l=0;l<a;l++)s.fillRect(0,l,1,1);break;case"cross":for(l=0;l<a;l++)s.fillRect(l,0,1,1),s.fillRect(0,l,1,1);break;case"forward":for(l=0;l<a;l++)s.fillRect(l,l,1,1);break;case"backward":for(l=0;l<a;l++)s.fillRect(a-1-l,l,1,1);break;case"diagonal":for(l=0;l<a;l++)s.fillRect(l,l,1,1),s.fillRect(a-1-l,l,1,1)}return p.mixin(s.createPattern(c,n),e.pattern)}if(e.image){var c=document.createElement("canvas"),g=(t=e.image.imgSize,c.width=t[0],c.height=t[1],t),f=g[0],d=g[1],h=c.getContext("2d"),u=document.createElement("img");return u.src=e.image.imageData,u.onload=function(){return h.drawImage(u,0,0,f,d)},"rgba(255,255,255,0.1)"}throw"invalid color configuration"},e.prototype.deserializeLinearGradient=function(e){var t=JSON.parse(e.type.replace(/\w+\((.*)\)/m,"[$1]")),i=t[0],r=t[1],o=t[2],n=t[3],a=document.createElement("canvas");a.width=Math.max(i,o),a.height=Math.max(r,n);var s=a.getContext("2d").createLinearGradient(i,r,o,n);return p.mixin(s,{type:"linear("+[i,r,o,n].join(",")+")"}),s},e.prototype.deserializeRadialGradient=function(e){var t=JSON.parse(e.type.replace(/radial\((.*)\)/m,"[$1]")),i=t[0],r=t[1],o=t[2],n=t[3],a=t[4],s=t[5],l=document.createElement("canvas");l.width=2*Math.max(i,n),l.height=2*Math.max(r,a);var c=l.getContext("2d").createRadialGradient(i,r,o,n,a,s);return p.mixin(c,{type:"radial("+[i,r,o,n,a,s].join(",")+")"}),c},e}();t.StyleConverter=o}),define("index",["require","exports","ol3-symbolizer/format/ol3-symbolizer"],function(e,t,i){"use strict";return i});
//# sourceMappingURL=index.js.map