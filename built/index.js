define("ol3-symbolizer/common/assign",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assign=function(e,t,i){null==i||"object"==typeof i&&0===Object.keys(i).length||("image"===t&&(i.hasOwnProperty("radius")&&(t="circle"),i.hasOwnProperty("points")&&i.points<1/0&&(t="star")),e[t]=i)}}),define("ol3-symbolizer/common/mixin",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mixin=function(t,i){return Object.keys(i).forEach(function(e){return t[e]=i[e]}),t}}),define("ol3-symbolizer/common/doif",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doif=function(e,t){null!=e&&t(e)}}),define("ol3-symbolizer/format/plugins/as-cross",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.is=function(e){return!!e&&(!!e.star&&(!!e.star.radius&&(4===e.star.points&&(0==e.star.radius2&&0==e.star.angle))))},e.as=function(e){var t=e.star;if(!t)throw"star expected";return{cross:{size:2*e.star.radius,fill:t.fill,opacity:t.opacity,rotateWithView:t.rotateWithView,rotation:t.rotation,scale:t.scale,snapToPixel:t.snapToPixel,stroke:t.stroke}}},e}();t.Shapeshifter=i}),define("ol3-symbolizer/format/plugins/as-square",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.is=function(e){return!!e&&(!!e.star&&(!!e.star.radius&&(4===e.star.points&&(void 0===e.star.radius2&&.7853981633974483==e.star.angle))))},e.as=function(e){var t=e.star;if(!t)throw"star expected";return{square:{size:2*e.star.radius,fill:t.fill,opacity:t.opacity,rotateWithView:t.rotateWithView,rotation:t.rotation,scale:t.scale,snapToPixel:t.snapToPixel,stroke:t.stroke}}},e}();t.Shapeshifter=i}),define("ol3-symbolizer/format/plugins/as-diamond",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.is=function(e){return!!e&&(!!e.star&&(!!e.star.radius&&(4===e.star.points&&(void 0===e.star.radius2&&0==e.star.angle))))},e.as=function(e){var t=e.star;if(!t)throw"star expected";return{diamond:{size:2*e.star.radius,fill:t.fill,opacity:t.opacity,rotateWithView:t.rotateWithView,rotation:t.rotation,scale:t.scale,snapToPixel:t.snapToPixel,stroke:t.stroke}}},e}();t.Shapeshifter=i}),define("ol3-symbolizer/format/plugins/as-triangle",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.is=function(e){return!!e&&(!!e.star&&(!!e.star.radius&&(3===e.star.points&&(null==e.star.radius2&&0==e.star.angle))))},e.as=function(e){var t=e.star;if(!t)throw"star expected";return{triangle:{size:2*e.star.radius,fill:t.fill,opacity:t.opacity,rotateWithView:t.rotateWithView,rotation:t.rotation,scale:t.scale,snapToPixel:t.snapToPixel,stroke:t.stroke}}},e}();t.Shapeshifter=i}),define("ol3-symbolizer/format/plugins/as-x",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.is=function(e){return!!e&&(!!e.star&&(!!e.star.radius&&(4===e.star.points&&(0==e.star.radius2&&.7853981633974483==e.star.angle))))},e.as=function(e){var t=e.star;if(!t)throw"star expected";return{x:{size:2*e.star.radius,fill:t.fill,opacity:t.opacity,rotateWithView:t.rotateWithView,rotation:t.rotation,scale:t.scale,snapToPixel:t.snapToPixel,stroke:t.stroke}}},e}();t.Shapeshifter=i}),define("ol3-symbolizer/format/ol3-symbolizer",["require","exports","openlayers","ol3-symbolizer/common/assign","ol3-symbolizer/common/mixin","ol3-symbolizer/common/doif","ol3-symbolizer/format/plugins/as-cross","ol3-symbolizer/format/plugins/as-square","ol3-symbolizer/format/plugins/as-diamond","ol3-symbolizer/format/plugins/as-triangle","ol3-symbolizer/format/plugins/as-x"],function(e,t,c,r,d,i,o,a,s,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(){this.converters=[],this.converters.push(o.Shapeshifter),this.converters.push(a.Shapeshifter),this.converters.push(s.Shapeshifter),this.converters.push(n.Shapeshifter),this.converters.push(l.Shapeshifter)}return e.prototype.fromJson=function(e){return this.deserializeStyle(e)},e.prototype.toJson=function(e){var t=this.serializeStyle(e);return this.converters.some(function(e){return e.is(t)&&!!(t=e.as(t))}),t},e.prototype.getGeometry=function(e){var t=e.getGeometry();return t instanceof c.geom.Polygon&&(t=t.getInteriorPoint()),t},e.prototype.serializeStyle=function(t){var i={};if(!t)return null;if("string"==typeof t)throw t;if("number"==typeof t)throw t;return t.getColor&&d.mixin(i,this.serializeColor(t.getColor())),t.getImage&&r.assign(i,"image",this.serializeImage(t.getImage())),t.getFill&&r.assign(i,"fill",this.serializeFill(t.getFill())),t.getOpacity&&r.assign(i,"opacity",t.getOpacity()),t.getStroke&&r.assign(i,"stroke",this.serializeStroke(t.getStroke())),t.getText&&r.assign(i,"text",this.serializeText(t.getText())),t.getWidth&&r.assign(i,"width",t.getWidth()),t.getOffsetX&&r.assign(i,"offset-x",t.getOffsetX()),t.getOffsetY&&r.assign(i,"offset-y",t.getOffsetY()),t.getWidth&&r.assign(i,"width",t.getWidth()),t.getFont&&r.assign(i,"font",t.getFont()),t.getRadius&&r.assign(i,"radius",t.getRadius()),t.getRadius2&&r.assign(i,"radius2",t.getRadius2()),t.getPoints&&r.assign(i,"points",t.getPoints()),t.getAngle&&r.assign(i,"angle",t.getAngle()),t.getRotation&&r.assign(i,"rotation",t.getRotation()),t.getOrigin&&r.assign(i,"origin",t.getOrigin()),t.getScale&&r.assign(i,"scale",t.getScale()),t.getSize&&r.assign(i,"size",t.getSize()),t.getAnchor&&(r.assign(i,"anchor",t.getAnchor()),"anchorXUnits,anchorYUnits,anchorOrigin".split(",").forEach(function(e){r.assign(i,e,t[e+"_"])})),t.path&&(t.path&&r.assign(i,"path",t.path),t.getImageSize&&r.assign(i,"imgSize",t.getImageSize()),t.stroke&&r.assign(i,"stroke",t.stroke),t.fill&&r.assign(i,"fill",t.fill),t.scale&&r.assign(i,"scale",t.scale),t.imgSize&&r.assign(i,"imgSize",t.imgSize)),t.getSrc&&r.assign(i,"src",t.getSrc()),i},e.prototype.serializeImage=function(e){if("string"==typeof e)throw e;if("number"==typeof e)throw e;return this.serializeStyle(e)},e.prototype.serializeStroke=function(e){if("string"==typeof e)throw e;if("number"==typeof e)throw e;return this.serializeStyle(e)},e.prototype.serializeText=function(e){return e},e.prototype.serializeColor=function(e){if(e instanceof Array)return{color:c.color.asString(e)};if(e instanceof CanvasGradient)return{gradient:e};if(e instanceof CanvasPattern)return{pattern:e};if("string"==typeof e)return{color:e};throw"unknown color type"},e.prototype.serializeFill=function(e){return this.serializeStyle(e)},e.prototype.deserializeStyle=function(e){var t,i,r,o,a=this;if(e.circle)t=this.deserializeCircle(e.circle);else if(e.star)t=this.deserializeStar(e.star);else if(e.icon)t=this.deserializeIcon(e.icon);else if(e.svg)t=this.deserializeSvg(e.svg);else if(e.image&&(e.image.img||e.image.path))t=this.deserializeSvg(e.image);else if(e.image&&e.image.src)t=this.deserializeIcon(e.image);else if(e.image)throw"unknown image type";e.text&&(i=this.deserializeText(e.text)),e.fill&&(r=this.deserializeFill(e.fill)),e.stroke&&(o=this.deserializeStroke(e.stroke));var s=new c.style.Style({image:t,text:i,fill:r,stroke:o});return t&&s.setGeometry(function(e){return a.getGeometry(e)}),s},e.prototype.deserializeText=function(e){var t;e.rotation=e.rotation||0,e.scale=e.scale||1;var i=[e["offset-x"]||0,e["offset-y"]||0],r=i[0],o=i[1],a=new c.geom.Point([r,o]);return a.rotate(e.rotation,[0,0]),a.scale(e.scale,e.scale),r=(t=a.getCoordinates())[0],o=t[1],new c.style.Text({fill:e.fill&&this.deserializeFill(e.fill),stroke:e.stroke&&this.deserializeStroke(e.stroke),text:e.text,font:e.font,offsetX:r,offsetY:o,rotation:e.rotation,scale:e.scale})},e.prototype.deserializeCircle=function(e){var t=new c.style.Circle({radius:e.radius,fill:e.fill&&this.deserializeFill(e.fill),stroke:e.stroke&&this.deserializeStroke(e.stroke)});return t.setOpacity(e.opacity),t},e.prototype.deserializeStar=function(e){var t=new c.style.RegularShape({radius:e.radius,radius2:e.radius2,points:e.points,angle:e.angle,fill:e.fill&&this.deserializeFill(e.fill),stroke:e.stroke&&this.deserializeStroke(e.stroke)});return i.doif(e.rotation,function(e){return t.setRotation(e)}),i.doif(e.opacity,function(e){return t.setOpacity(e)}),t},e.prototype.deserializeIcon=function(e){e.anchor||(e.anchor=[e["anchor-x"]||.5,e["anchor-y"]||.5]);var t=new c.style.Icon({anchor:e.anchor||[.5,.5],anchorOrigin:e.anchorOrigin||"top-left",anchorXUnits:e.anchorXUnits||"fraction",anchorYUnits:e.anchorYUnits||"fraction",img:void 0,imgSize:void 0,offset:e.offset,offsetOrigin:e.offsetOrigin,opacity:e.opacity,scale:e.scale,snapToPixel:e.snapToPixel,rotateWithView:e.rotateWithView,rotation:e.rotation,size:e.size,src:e.src,color:e.color});return t.load(),t},e.prototype.deserializeSvg=function(t){var e;if(t.rotation=t.rotation||0,t.scale=t.scale||1,t.img){var i=document.getElementById(t.img);if(!i)throw"unable to find svg element: "+t.img;if(i){var r=i.getElementsByTagName("path")[0];r&&(i.viewBox&&(t.imgSize||(t.imgSize=[i.viewBox.baseVal.width,i.viewBox.baseVal.height])),t.path=(t.path||"")+r.getAttribute("d"))}}var o=document.createElement("canvas");if(t.path){if(e=t.imgSize.map(function(e){return e*t.scale}),o.width=e[0],o.height=e[1],t.stroke&&t.stroke.width){var a=2*t.stroke.width*t.scale;o.width+=a,o.height+=a}var s=o.getContext("2d"),n=new Path2D(t.path);s.translate(o.width/2,o.height/2),s.scale(t.scale,t.scale),s.translate(-t.imgSize[0]/2,-t.imgSize[1]/2),t.fill&&(s.fillStyle=t.fill.color,s.fill(n)),t.stroke&&(s.strokeStyle=t.stroke.color,s.lineWidth=t.stroke.width,s.stroke(n))}var l=new c.style.Icon({img:o,imgSize:[o.width,o.height],rotation:t.rotation,scale:1,anchor:t.anchor||[o.width/2,o.height],anchorOrigin:t.anchorOrigin,anchorXUnits:t.anchorXUnits||"pixels",anchorYUnits:t.anchorYUnits||"pixels",offset:t.offset,offsetOrigin:t.offsetOrigin,opacity:t.opacity,snapToPixel:t.snapToPixel,rotateWithView:t.rotateWithView,size:[o.width,o.height],src:void 0});return d.mixin(l,{path:t.path,stroke:t.stroke,fill:t.fill,scale:t.scale,imgSize:t.imgSize})},e.prototype.deserializeFill=function(e){return new c.style.Fill({color:e&&this.deserializeColor(e)})},e.prototype.deserializeStroke=function(e){var t=new c.style.Stroke;return i.doif(e.color,function(e){return t.setColor(e)}),i.doif(e.lineCap,function(e){return t.setLineCap(e)}),i.doif(e.lineDash,function(e){return t.setLineDash(e)}),i.doif(e.lineJoin,function(e){return t.setLineJoin(e)}),i.doif(e.miterLimit,function(e){return t.setMiterLimit(e)}),i.doif(e.width,function(e){return t.setWidth(e)}),t},e.prototype.deserializeColor=function(e){var t;if(e.color)return e.color;if(e.gradient){var r,i=e.gradient.type;if(0===i.indexOf("linear(")?r=this.deserializeLinearGradient(e.gradient):0===i.indexOf("radial(")&&(r=this.deserializeRadialGradient(e.gradient)),e.gradient.stops){d.mixin(r,{stops:e.gradient.stops});var o=e.gradient.stops.split(";");(o=o.map(function(e){return e.trim()})).forEach(function(e){var t=e.match(/ \d+%/m)[0],i=e.substr(0,e.length-t.length);r.addColorStop(parseInt(t)/100,i)})}return r}if(e.pattern){var a=e.pattern.repitition,s=(c=document.createElement("canvas")).width=c.height=6|e.pattern.spacing,n=c.getContext("2d");switch(n.fillStyle=e.pattern.color,e.pattern.orientation){case"horizontal":for(var l=0;l<s;l++)n.fillRect(l,0,1,1);break;case"vertical":for(l=0;l<s;l++)n.fillRect(0,l,1,1);break;case"cross":for(l=0;l<s;l++)n.fillRect(l,0,1,1),n.fillRect(0,l,1,1);break;case"forward":for(l=0;l<s;l++)n.fillRect(l,l,1,1);break;case"backward":for(l=0;l<s;l++)n.fillRect(s-1-l,l,1,1);break;case"diagonal":for(l=0;l<s;l++)n.fillRect(l,l,1,1),n.fillRect(s-1-l,l,1,1)}return d.mixin(n.createPattern(c,a),e.pattern)}if(e.image){var c=document.createElement("canvas"),f=(t=e.image.imgSize,c.width=t[0],c.height=t[1],t),u=f[0],g=f[1],p=c.getContext("2d"),h=document.createElement("img");return h.src=e.image.imageData,h.onload=function(){return p.drawImage(h,0,0,u,g)},"rgba(255,255,255,0.1)"}throw"invalid color configuration"},e.prototype.deserializeLinearGradient=function(e){var t=JSON.parse(e.type.replace(/\w+\((.*)\)/m,"[$1]")),i=t[0],r=t[1],o=t[2],a=t[3],s=document.createElement("canvas");s.width=Math.max(i,o),s.height=Math.max(r,a);var n=s.getContext("2d").createLinearGradient(i,r,o,a);return d.mixin(n,{type:"linear("+[i,r,o,a].join(",")+")"}),n},e.prototype.deserializeRadialGradient=function(e){var t=JSON.parse(e.type.replace(/radial\((.*)\)/m,"[$1]")),i=t[0],r=t[1],o=t[2],a=t[3],s=t[4],n=t[5],l=document.createElement("canvas");l.width=2*Math.max(i,a),l.height=2*Math.max(r,s);var c=l.getContext("2d").createRadialGradient(i,r,o,a,s,n);return d.mixin(c,{type:"radial("+[i,r,o,a,s,n].join(",")+")"}),c},e}();t.StyleConverter=f}),define("index",["require","exports","ol3-symbolizer/format/ol3-symbolizer"],function(e,t,i){"use strict";return i});
//# sourceMappingURL=index.js.map