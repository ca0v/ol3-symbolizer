<!DOCTYPE html>
<html>

<head>
    <title>ol3-symbolizer amd-based spec runner</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="../node_modules/mocha/mocha.css">
    <link rel="stylesheet" href="../node_modules/ol/ol.css" />
    <style>
        /* hide tests if they pass */
        #mocha-report .suite .test.pass {
            display: none;
        }
    </style>
</head>

<body>
    <div id="mocha"></div>
    <script type="text/javascript" src="../node_modules/requirejs/require.js"></script>
    <script>
        // setup require js packaging system and load the "spec" before running mocha
        requirejs.config({
            shim: {
                // no need to wrap ol in a define method when using a shim
                // build this using the "npm run build-legacy" (see ol package.json)
                "openlayers": {
                    deps: [], // no dependencies, needs path to indicate where to find "openlayers"
                    exports: "ol", // tell requirejs which global this library defines
                }
            },
            paths: {
                "openlayers": "../static/openlayers/index"
            },
            packages: [
                {
                    name: 'ol',
                    location: '../node_modules/ol',
                    main: 'index'
                },
                {
                    name: 'mocha',
                    location: '../node_modules/mocha',
                    main: 'mocha'
                },
                {
                    name: 'should',
                    location: '../node_modules/should',
                    main: 'should'
                }
            ],
            deps: ["spec/index"],
            callback: function () {
                require(["mocha"], function () {
                    let Mocha = window["mocha"];

                    let mocha = Mocha.setup({
                        timeout: 6000,
                        ui: 'bdd',
                        bail: false
                    });

                    // execute "describe" and "it" methods before running mocha
                    require(["tests/index"], () => mocha.run());
                });
            }
        });
    </script>
</body>

</html>